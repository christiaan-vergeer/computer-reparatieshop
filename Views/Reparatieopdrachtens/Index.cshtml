@model IEnumerable<computer_reparatieshop.Models.Reparatieopdrachten>

@{
    ViewBag.Title = "Reparatie Index";

}

<div style="overflow: hidden;   display:flex; justify-content:flex-start;">
    <div style="float: left">
        <h2>Reparatie Index</h2>

    </div>
    <div style="margin: auto;">
        <table class="table" style="margin-bottom: 0px;">
            <tr>
                <th>
                    Pending = @ViewBag.Pending
                </th>
                <th>
                    Underway = @ViewBag.Underway
                </th>
                <th>
                    Waiting for parts = @ViewBag.WaitingForParts
                </th>
                <th>
                    Done = @ViewBag.Done
                </th>
                <th></th>
            </tr>
        </table>
    </div>
</div>





<p>
    @Html.ActionLink("Create New", "Create")
</p>

<table class="table">
    @*@{
            Html.DisplayNameFor(model => model.name) {

            }
            for (int i = 0; i < ViewBag.RepairOrdersCount; i++)
            {
                if (model.name)
                {

                }
            }
        }*@
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.StartDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.EndDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Status)
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        string backgroundClass = "White";
        string statusClass;

        if (item.StartDate.Ticks < DateTime.Now.Ticks && item.Status.ToString() == "Pending")
        {
            backgroundClass = "Red";
            statusClass = "Empty";
        }
        else
        {
            backgroundClass = "White";
            statusClass = item.Status.ToString();
        }



        <tr class=@backgroundClass>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.StartDate)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.EndDate)
            </td>
            <td class=@statusClass>
                @Html.DisplayFor(modelItem => item.Status)
            </td>
            <td>
                @Html.ActionLink("Edit", "Edit", new { id = item.Id }) |
                @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                @Html.ActionLink("Delete", "Delete", new { id = item.Id })
            </td>
        </tr>

    }

</table>
